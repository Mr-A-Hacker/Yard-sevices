{% extends "base.html" %}

{% block title %}Admin Dashboard - Yard Services{% endblock %}

{% block content %}
<header style="padding:40px 20px; text-align:center;">
  <h1 style="margin:0; font-size:36px; color:#1abc9c;">Admin Dashboard</h1>
  <p style="font-size:18px; color:#ecf0f1;">Manage posts, services, and customer requests</p>
</header>

<div class="container" style="display:flex; justify-content:space-around; margin:30px; flex-wrap:wrap;">
  <!-- New Post -->
  <div class="card" style="background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3); width:30%; min-width:280px; margin:15px; animation:fadeIn 1s ease-in-out;">
    <h2 style="color:#1abc9c;">Create a New Post</h2>
    <form method="POST" enctype="multipart/form-data">
      <input name="title" placeholder="Post Title" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;">
      <textarea name="content" placeholder="Post Content" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;"></textarea>
      <input type="file" name="image">
      <button type="submit" style="background:#3498db; color:white; border:none; padding:12px; border-radius:8px; cursor:pointer; width:100%; font-size:15px; transition:0.3s;">Upload Post</button>
    </form>
  </div>

  <!-- Add Service -->
  <div class="card" style="background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3); width:30%; min-width:280px; margin:15px; animation:fadeIn 1s ease-in-out;">
    <h2 style="color:#1abc9c;">Add a New Service</h2>
    <form method="POST">
      <input name="new_service" placeholder="Service Name" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;">
      <input name="new_price" type="number" placeholder="Price" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;">
      <button type="submit" style="background:#3498db; color:white; border:none; padding:12px; border-radius:8px; cursor:pointer; width:100%; font-size:15px; transition:0.3s;">Add Service</button>
    </form>
  </div>

  <!-- Update Price -->
  <div class="card" style="background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3); width:30%; min-width:280px; margin:15px; animation:fadeIn 1s ease-in-out;">
    <h2 style="color:#1abc9c;">Update Service Price</h2>
    <form method="POST">
      <select name="update_service" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;">
        {% for service, price in services.items() %}
          <option value="{{ service }}">{{ service }} (${{ price }})</option>
        {% endfor %}
      </select>
      <input name="updated_price" type="number" placeholder="New Price" style="width:100%; padding:10px; margin:8px 0; border-radius:8px; border:none;">
      <button type="submit" style="background:#3498db; color:white; border:none; padding:12px; border-radius:8px; cursor:pointer; width:100%; font-size:15px; transition:0.3s;">Update Price</button>
    </form>
  </div>
</div>

<!-- Current Posts -->
<div class="posts" style="max-width:1000px; margin:30px auto; background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3);">
  <h2>Current Posts</h2>
  {% for post in posts %}
    <div class="post" style="margin-bottom:20px; animation:fadeIn 1s ease-in-out;">
      <h3 style="color:#1abc9c;">{{ post.title }}</h3>
      <p>{{ post.content }}</p>
      {% if post.image %}
        <img src="{{ url_for('static', filename='uploads/' + post.image) }}" style="max-width:100%; border-radius:5px;">
      {% endif %}
    </div>
    <hr style="border:none; border-top:1px solid rgba(255,255,255,0.2);">
  {% endfor %}
</div>

<!-- Submissions Table -->
<div class="submissions" style="max-width:1000px; margin:30px auto; background:rgba(255,255,255,0.1); padding:20px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.3);">
  <h2>Service Requests</h2>
  <table style="width:100%; border-collapse:collapse; margin-top:15px;">
    <tr>
      <th style="color:#1abc9c; padding:10px; text-align:left;">User</th>
      <th style="color:#1abc9c; padding:10px; text-align:left;">Address</th>
      <th style="color:#1abc9c; padding:10px; text-align:left;">Phone</th>
      <th style="color:#1abc9c; padding:10px; text-align:left;">Service</th>
      <th style="color:#1abc9c; padding:10px; text-align:left;">Cost</th>
      <th style="color:#1abc9c; padding:10px; text-align:left;">Time</th>
    </tr>
    {% for sub in submissions %}
    <tr style="border-bottom:1px solid rgba(255,255,255,0.2);">
      <td style="padding:10px;">{{ sub.user }}</td>
      <td style="padding:10px;">{{ sub.address }}</td>
      <td style="padding:10px;">{{ sub.phone }}</td>
      <td style="padding:10px;">{{ sub.service }}</td>
      <td style="padding:10px;">${{ sub.cost }}</td>
      <td style="padding:10px;">{{ sub.time }}</td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
